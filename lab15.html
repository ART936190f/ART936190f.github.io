<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>–ü–ü-23 ‚Äî –ì–æ–ª—è–Ω–∏—Ü—å–∫–∏–π –ê—Ä—Ç–µ–º (–û–±—Ä–æ–±–∫–∞ –¢–µ–∫—Å—Ç—É)</title>
    <link rel="icon" href="cat.png" type="image/x-icon"> 
    <style>
        :root{
            --bg:#f6f9fc;
            --panel:#ffffff;
            --accent:#2b82ff;
            --muted:#666;
            --red:#e53935;
            --green:#4CAF50;
        }
        body{
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            margin:0;
            background: linear-gradient(180deg,var(--bg),#e9f2ff 60%);
            min-height:100vh;
            display:flex;
            align-items:center;
            justify-content:center;
            padding:32px;
        }
        .container{
            width:100%;
            max-width:1000px;
            background:var(--panel);
            border-radius:14px;
            box-shadow:0 10px 30px rgba(20,40,80,0.08);
            padding:22px;
            z-index: 10;
        }
        h1{margin:0 0 8px 0;font-size:24px}
        h2 { font-size: 18px; margin-top: 15px; margin-bottom: 5px; color: #1e40af;}
        p.lead{margin:0 0 18px 0;color:var(--muted)}
        .controls{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:18px}
        button{
            background:var(--accent);
            color:white;
            border:0;
            padding:10px 14px;
            border-radius:10px;
            cursor:pointer;
            box-shadow:0 6px 14px rgba(43,130,255,0.18);
            font-weight:600;
            transition: transform 0.1s;
        }
        button:active {
            transform: scale(0.98);
        }
        button.secondary{
            background:transparent;
            color:var(--accent);
            border:1px solid rgba(43,130,255,0.16);
            box-shadow:none;
            font-weight:600;
        }
        textarea {
            width: 100%;
            height: 120px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            resize: vertical;
            font-family: monospace;
            font-size: 14px;
            margin-bottom: 10px;
        }
        .row{display:flex;gap:12px;align-items:center;margin-top:8px;flex-wrap:wrap;margin-bottom:10px;}
        footer{margin-top:14px;color:var(--muted);font-size:13px}
        .small{font-size:13px;color:var(--muted)}
        
        /* --- –°–¢–ò–õ–Ü –î–õ–Ø –ú–û–î–ê–õ–¨–ù–û–ì–û –í–Ü–ö–ù–ê --- */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
            padding-top: 30px;
        }
        .modal-content {
            background-color: var(--panel);
            margin: 5% auto;
            padding: 25px;
            border-radius: 12px;
            width: 90%;
            max-width: 700px;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.2);
            animation: fadeIn 0.3s;
        }
        .modal-content h3 { margin-top: 0; color: var(--accent); }
        .modal-content .modal-body { margin-bottom: 20px; }
        .modal-content .modal-result { 
            padding: 15px; 
            border-left: 4px solid var(--green); 
            background-color: #e8ffe8;
            font-weight: 500;
            min-height: 20px;
            margin-top: 15px;
            white-space: pre-wrap; /* –ó–±–µ—Ä—ñ–≥–∞—î —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É */
            word-break: break-word; /* –î–æ–∑–≤–æ–ª—è—î –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç–∏ –¥–æ–≤–≥—ñ —Å–ª–æ–≤–∞ */
        }
        .close-btn {
            color: var(--muted);
            float: right;
            font-size: 28px;
            font-weight: bold;
            line-height: 1;
        }
        .close-btn:hover,
        .close-btn:focus {
            color: var(--red);
            text-decoration: none;
            cursor: pointer;
        }
        @keyframes fadeIn {
            from {opacity: 0; transform: translateY(-20px);}
            to {opacity: 1; transform: translateY(0);}
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>üìù –û–±—Ä–æ–±–∫–∞ —Ç–∞ –®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –¢–µ–∫—Å—Ç—É</h1>
        <p class="lead">–í–≤–µ–¥—ñ—Ç—å –≤–∞—à —Ç–µ–∫—Å—Ç (–¥–æ 2500 —Å–∏–º–≤–æ–ª—ñ–≤) —Ç–∞ –≤–∏–±–µ—Ä—ñ—Ç—å –∑–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è.</p>
        
        <textarea id="textInput" maxlength="2500" placeholder="–í–≤–µ–¥—ñ—Ç—å –≤–∞—à —Ç–µ–∫—Å—Ç —Å—é–¥–∏... –ù–∞–ø—Ä–∏–∫–ª–∞–¥: 'Fantasy and Dragons. Deep in the dungeon...'"></textarea>
        
        <hr>
        
        <h2>1Ô∏è‚É£ –ó–∞–≤–¥–∞–Ω–Ω—è 1: –ó–∞–º—ñ–Ω–∞ —Ç–∞ –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫</h2>
        <div class="controls">
            <button onclick="executeTask1()">–í–∏–∫–æ–Ω–∞—Ç–∏ –ó–∞–≤–¥–∞–Ω–Ω—è 1</button>
        </div>
        
        <hr>

        <h2>2Ô∏è‚É£ –ó–∞–≤–¥–∞–Ω–Ω—è 2: –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –°–ª—ñ–≤</h2>
        <div class="controls">
            <button onclick="executeTask2()">–í–∏–∫–æ–Ω–∞—Ç–∏ –ó–∞–≤–¥–∞–Ω–Ω—è 2</button>
        </div>
        
        <hr>

        <h2>3Ô∏è‚É£ –ó–∞–≤–¥–∞–Ω–Ω—è 3: –®–∏—Ñ—Ä –¶–µ–∑–∞—Ä—è (+1)</h2>
        <div class="controls">
            <button onclick="executeTask3()">–ó–∞—à–∏—Ñ—Ä—É–≤–∞—Ç–∏ –¢–µ–∫—Å—Ç</button>
        </div>

        <hr>

        <h2>4Ô∏è‚É£ –ó–∞–≤–¥–∞–Ω–Ω—è 4: –®–∏—Ñ—Ä –ü–µ—Ä–µ–º—ñ—à—É–≤–∞–Ω–Ω—è (–ü–µ—Ä—à–∞ —ñ –û—Å—Ç–∞–Ω–Ω—è –§—ñ–∫—Å–æ–≤–∞–Ω—ñ)</h2>
        <div class="controls">
            <button onclick="executeTask4()">–ó–∞—à–∏—Ñ—Ä—É–≤–∞—Ç–∏ –¢–µ–∫—Å—Ç</button>
        </div>
        
        <footer>–ü–ü-23 | –í–∏–∫–æ–Ω–∞–≤–µ—Ü—å: –ì–æ–ª—è–Ω–∏—Ü—å–∫–∏–π –ê—Ä—Ç–µ–º</footer>
    </div>

    <div id="resultModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h3 id="modalTitle">–†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
            <div id="modalBody" class="modal-body"></div>
            <div id="modalResult" class="modal-result"></div>
        </div>
    </div>

    <script>
        // =================================================================
        // =========== –£—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É ===========
        // =================================================================
        
        function getTextInput() {
            const text = document.getElementById('textInput').value.trim();
            if (text.length === 0) {
                alert("–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å —Ç–µ–∫—Å—Ç —É –ø–æ–ª–µ –≤–∏—â–µ –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è.");
                return null;
            }
            return text;
        }

        function showModal(title, body, result) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalBody').innerHTML = body;
            document.getElementById('modalResult').textContent = result;
            document.getElementById('resultModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('resultModal').style.display = 'none';
        }

        window.onclick = function(event) {
            const modal = document.getElementById('resultModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // =================================================================
        // =========== –ó–∞–≤–¥–∞–Ω–Ω—è 1: –ó–∞–º—ñ–Ω–∞ —Ç–∞ –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ ===========
        // =================================================================

        function executeTask1() {
            const text = getTextInput();
            if (!text) return;

            let output = "";
            let processedText = text;
            
            // 1. –ó–∞–º—ñ–Ω–∏—Ç–∏ —Å–∏–º–≤–æ–ª '*' –Ω–∞ '++'
            // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –≥–ª–æ–±–∞–ª—å–Ω–∏–π —Ä–µ–≥—É–ª—è—Ä–Ω–∏–π –≤–∏—Ä–∞–∑ /g –¥–ª—è –∑–∞–º—ñ–Ω–∏ –≤—Å—ñ—Ö –≤—Ö–æ–¥–∂–µ–Ω—å
            processedText = processedText.replace(/\*/g, '++');

            output += "‚úÖ **–¢–µ–∫—Å—Ç –ø—ñ—Å–ª—è –∑–∞–º—ñ–Ω–∏ '*' –Ω–∞ '++':**\n";
            output += processedText + "\n\n";

            // 2. –ü—ñ–¥—Ä–∞—Ö—É–≤–∞—Ç–∏ –∑–∞–≥–∞–ª—å–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ª—ñ—Ç–µ—Ä 'F' —Ç–∞ 'D' (—á—É—Ç–ª–∏–≤—ñ—Å—Ç—å –¥–æ —Ä–µ–≥—ñ—Å—Ç—Ä—É)
            
            // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –≥–ª–æ–±–∞–ª—å–Ω–∏–π —Ä–µ–≥—É–ª—è—Ä–Ω–∏–π –≤–∏—Ä–∞–∑ –∑ –ø—Ä–∞–ø–æ—Ä–æ–º 'i' (–Ω–µ—á—É—Ç–ª–∏–≤–∏–π –¥–æ —Ä–µ–≥—ñ—Å—Ç—Ä—É)
            const countF = (processedText.match(/f/gi) || []).length;
            const countD = (processedText.match(/d/gi) || []).length;
            const totalCount = countF + countD;
            
            output += `üîé –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ª—ñ—Ç–µ—Ä 'F'/'f': ${countF}\n`;
            output += `üîé –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ª—ñ—Ç–µ—Ä 'D'/'d': ${countD}\n`;
            output += `‚úÖ –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å 'F'/'f' —Ç–∞ 'D'/'d': ${totalCount}\n`;

            const body = "–í–∏–∫–æ–Ω–∞–Ω–æ –∑–∞–º—ñ–Ω—É —Å–∏–º–≤–æ–ª—ñ–≤ —Ç–∞ –ø—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –∑–∞–≥–∞–ª—å–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –ª—ñ—Ç–µ—Ä 'F'/'f' —Ç–∞ 'D'/'d' (–Ω–µ—á—É—Ç–ª–∏–≤–∏–π –¥–æ —Ä–µ–≥—ñ—Å—Ç—Ä—É).";
            showModal("‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ó–∞–≤–¥–∞–Ω–Ω—è 1", body, output);
        }

        // =================================================================
        // =========== –ó–∞–≤–¥–∞–Ω–Ω—è 2: –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –°–ª—ñ–≤ ===========
        // =================================================================
        
        function executeTask2() {
            const text = getTextInput();
            if (!text) return;

            let output = "";
            
            // –†–æ–∑–±–∏–≤–∞—î–º–æ —Ç–µ–∫—Å—Ç –Ω–∞ —Å–ª–æ–≤–∞, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –ø—Ä–æ–±—ñ–ª–∏ —è–∫ —Ä–æ–∑–¥—ñ–ª—å–Ω–∏–∫
            const words = text.split(/\s+/).filter(word => word.length > 0);
            
            let processedWords = [];
            let countE = 0;

            for (let i = 0; i < words.length; i++) {
                let currentWord = words[i];
                
                // 1. –£ –¥—Ä—É–≥–æ–º—É —Å–ª–æ–≤—ñ (i == 1) –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó –ª—ñ—Ç–µ—Ä–∏ –≤—Å—Ç–∞–≤–∏—Ç–∏ –ø—Ä–æ–±—ñ–ª
                if (i === 1) {
                    // –†–æ–∑–±–∏–≤–∞—î–º–æ —Å–ª–æ–≤–æ –Ω–∞ –º–∞—Å–∏–≤ —Å–∏–º–≤–æ–ª—ñ–≤, –ø–æ—Ç—ñ–º –æ–±'—î–¥–Ω—É—î–º–æ —ó—Ö –ø—Ä–æ–±—ñ–ª–æ–º
                    // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ .split('') —Ç–∞ .join(' ')
                    processedWords.push(currentWord.split('').join(' '));
                } else {
                    processedWords.push(currentWord);
                }

                // 2. –í–∏–∑–Ω–∞—á–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ª—ñ–≤, —è–∫—ñ –∑–∞–∫—ñ–Ω—á—É—é—Ç—å—Å—è –Ω–∞ '–µ' (–Ω–µ—á—É—Ç–ª–∏–≤–æ –¥–æ —Ä–µ–≥—ñ—Å—Ç—Ä—É)
                // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Ä–µ–≥—É–ª—è—Ä–Ω–∏–π –≤–∏—Ä–∞–∑ /–µ$/i
                if (currentWord.match(/–µ$/i)) {
                    countE++;
                }
            }
            
            const processedText = processedWords.join(' ');
            
            output += "‚úÖ **–¢–µ–∫—Å—Ç –ø—ñ—Å–ª—è –æ–±—Ä–æ–±–∫–∏ (—É –¥—Ä—É–≥–æ–º—É —Å–ª–æ–≤—ñ –¥–æ–¥–∞–Ω–æ –ø—Ä–æ–±—ñ–ª–∏):**\n";
            output += processedText + "\n\n";
            output += `üîé –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ª—ñ–≤, —è–∫—ñ –∑–∞–∫—ñ–Ω—á—É—é—Ç—å—Å—è –Ω–∞ '–µ'/'–ï': ${countE}\n`;

            const body = "–í–∏–∫–æ–Ω–∞–Ω–æ –≤—Å—Ç–∞–≤–∫—É –ø—Ä–æ–±—ñ–ª—É –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó –ª—ñ—Ç–µ—Ä–∏ —É –¥—Ä—É–≥–æ–º—É —Å–ª–æ–≤—ñ —Ç–∞ –ø—ñ–¥—Ä–∞—Ö–æ–≤–∞–Ω–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ª—ñ–≤, —â–æ –∑–∞–∫—ñ–Ω—á—É—é—Ç—å—Å—è –Ω–∞ '–µ' (–Ω–µ—á—É—Ç–ª–∏–≤–∏–π –¥–æ —Ä–µ–≥—ñ—Å—Ç—Ä—É).";
            showModal("‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ó–∞–≤–¥–∞–Ω–Ω—è 2", body, output);
        }

        // =================================================================
        // =========== –ó–∞–≤–¥–∞–Ω–Ω—è 3: –®–∏—Ñ—Ä –¶–µ–∑–∞—Ä—è (+1) ===========
        // =================================================================
        
        // –£–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –∞–ª—Ñ–∞–≤—ñ—Ç
        const UKR_LOWER = '–∞–±–≤–≥“ë–¥–µ—î–∂–∑–∏—ñ—ó–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—å—é—è';
        const UKR_UPPER = '–ê–ë–í–ì“ê–î–ï–Ñ–ñ–ó–ò–Ü–á–ô–ö–õ–ú–ù–û–ü–†–°–¢–£–§–•–¶–ß–®–©–¨–Æ–Ø';

        function caesarCipher(text) {
            let result = '';
            for (let i = 0; i < text.length; i++) {
                const char = text[i];
                let index;
                
                if (UKR_LOWER.includes(char)) {
                    index = UKR_LOWER.indexOf(char);
                    // –ó–∞–º—ñ–Ω—é—î–º–æ –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω—É –ª—ñ—Ç–µ—Ä—É, '—è' -> '–∞'
                    const newIndex = (index + 1) % UKR_LOWER.length;
                    result += UKR_LOWER[newIndex];
                } else if (UKR_UPPER.includes(char)) {
                    index = UKR_UPPER.indexOf(char);
                    // –ó–∞–º—ñ–Ω—é—î–º–æ –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω—É –ª—ñ—Ç–µ—Ä—É, '–Ø' -> '–ê'
                    const newIndex = (index + 1) % UKR_UPPER.length;
                    result += UKR_UPPER[newIndex];
                } else {
                    // –ó–∞–ª–∏—à–∞—î–º–æ —ñ–Ω—à—ñ —Å–∏–º–≤–æ–ª–∏ (–ø—Ä–æ–±—ñ–ª–∏, —Ä–æ–∑–¥—ñ–ª–æ–≤—ñ –∑–Ω–∞–∫–∏, —Ü–∏—Ñ—Ä–∏, –ª–∞—Ç–∏–Ω–∏—Ü—è) –±–µ–∑ –∑–º—ñ–Ω
                    result += char;
                }
            }
            return result;
        }

        function executeTask3() {
            const text = getTextInput();
            if (!text) return;

            const encryptedText = caesarCipher(text);

            let output = "‚úÖ **–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–π —Ç–µ–∫—Å—Ç (–∫–æ–∂–Ω–∞ –ª—ñ—Ç–µ—Ä–∞ –∑–∞–º—ñ–Ω–µ–Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–æ—é):**\n";
            output += encryptedText;

            const body = "–í–∏–∫–æ–Ω–∞–Ω–æ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –∑–∞ –ø—Ä–∞–≤–∏–ª–æ–º '–Ω–∞—Å—Ç—É–ø–Ω–∞ –ª—ñ—Ç–µ—Ä–∞ –≤ –∞–ª—Ñ–∞–≤—ñ—Ç—ñ' (—à–∏—Ñ—Ä –¶–µ–∑–∞—Ä—è +1). –õ—ñ—Ç–µ—Ä–∏ '—è' —Ç–∞ '–Ø' —Ü–∏–∫–ª—ñ—á–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç—å –≤ '–∞' —Ç–∞ '–ê'. –Ü–Ω—à—ñ —Å–∏–º–≤–æ–ª–∏ –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –Ω–µ–∑–º—ñ–Ω–Ω–∏–º–∏.";
            showModal("‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ó–∞–≤–¥–∞–Ω–Ω—è 3", body, output);
        }

        // =================================================================
        // =========== –ó–∞–≤–¥–∞–Ω–Ω—è 4: –®–∏—Ñ—Ä –ü–µ—Ä–µ–º—ñ—à—É–≤–∞–Ω–Ω—è (–ü–µ—Ä—à–∞ —ñ –û—Å—Ç–∞–Ω–Ω—è –§—ñ–∫—Å–æ–≤–∞–Ω—ñ) ===========
        // =================================================================
        
        // –î–æ–ø–æ–º—ñ–∂–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø–µ—Ä–µ–º—ñ—à—É–≤–∞–Ω–Ω—è (—Ç–∞—Å—É–≤–∞–Ω–Ω—è) –º–∞—Å–∏–≤—É
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                // –û–±–º—ñ–Ω –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function scrambleWord(word) {
            // –Ø–∫—â–æ —Å–ª–æ–≤–æ –º–∞—î 3 –∞–±–æ –º–µ–Ω—à–µ —Å–∏–º–≤–æ–ª—ñ–≤, –∞–±–æ –Ω–µ –º—ñ—Å—Ç–∏—Ç—å –ª—ñ—Ç–µ—Ä, –Ω–µ –∑–º—ñ–Ω—é—î–º–æ –π–æ–≥–æ
            if (word.length <= 3 || !word.match(/[a-z–∞-—è]/i)) {
                return word;
            }

            // 1. –í–∏–¥—ñ–ª—è—î–º–æ –ø–µ—Ä—à–∏–π —Ç–∞ –æ—Å—Ç–∞–Ω–Ω—ñ–π —Å–∏–º–≤–æ–ª–∏
            const firstChar = word[0];
            const lastChar = word[word.length - 1];

            // 2. –í–∏–¥—ñ–ª—è—î–º–æ —Å–µ—Ä–µ–¥–Ω—é —á–∞—Å—Ç–∏–Ω—É
            const middle = word.substring(1, word.length - 1);
            
            // 3. –†–æ–∑–±–∏–≤–∞—î–º–æ —Å–µ—Ä–µ–¥–Ω—é —á–∞—Å—Ç–∏–Ω—É –Ω–∞ —Å–∏–º–≤–æ–ª–∏, –ø–µ—Ä–µ–º—ñ—à—É—î–º–æ —ó—Ö —Ç–∞ –∑'—î–¥–Ω—É—î–º–æ
            const shuffledMiddle = shuffleArray(middle.split('')).join('');

            // 4. –ó–±–∏—Ä–∞—î–º–æ —Å–ª–æ–≤–æ –Ω–∞–∑–∞–¥
            return firstChar + shuffledMiddle + lastChar;
        }

        function executeTask4() {
            const text = getTextInput();
            if (!text) return;

            // 1. –†–æ–∑–±–∏–≤–∞—î–º–æ —Ç–µ–∫—Å—Ç –Ω–∞ —Å–ª–æ–≤–∞, –∑–±–µ—Ä—ñ–≥–∞—é—á–∏ —Ä–æ–∑–¥—ñ–ª—å–Ω–∏–∫–∏ (–ø—Ä–æ–±—ñ–ª–∏ —Ç–∞ —Ä–æ–∑–¥—ñ–ª–æ–≤—ñ –∑–Ω–∞–∫–∏)
            // –†–µ–≥—É–ª—è—Ä–Ω–∏–π –≤–∏—Ä–∞–∑: —Ä–æ–∑–±–∏–≤–∞—î–º–æ –∑–∞ –≥—Ä—É–ø–∞–º–∏ —Å–∏–º–≤–æ–ª—ñ–≤ (—Å–ª–æ–≤–æ/–Ω–µ-—Å–ª–æ–≤–æ)
            const parts = text.match(/(\w+|[^\w\s]+|\s+)/g) || [];
            
            let resultParts = parts.map(part => {
                // –Ø–∫—â–æ —á–∞—Å—Ç–∏–Ω–∞ –º—ñ—Å—Ç–∏—Ç—å –ª–∏—à–µ –±—É–∫–≤–∏ (—Ü–µ "—Å–ª–æ–≤–æ"), —à–∏—Ñ—Ä—É—î–º–æ
                if (part.match(/^\w+$/)) {
                    return scrambleWord(part);
                }
                // –Ü–Ω–∞–∫—à–µ (–ø—Ä–æ–±—ñ–ª, —Ä–æ–∑–¥—ñ–ª–æ–≤–∏–π –∑–Ω–∞–∫), –∑–∞–ª–∏—à–∞—î–º–æ —è–∫ —î
                return part;
            });
            
            const encryptedText = resultParts.join('');

            let output = "‚úÖ **–ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–π —Ç–µ–∫—Å—Ç (–ø–µ—Ä–µ–º—ñ—à–∞–Ω–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Å–ª—ñ–≤):**\n";
            output += encryptedText;

            const body = "–í–∏–∫–æ–Ω–∞–Ω–æ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è: —É –∫–æ–∂–Ω–æ–º—É —Å–ª–æ–≤—ñ, —è–∫–µ —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ –±—ñ–ª—å—à –Ω—ñ–∂ 3 –ª—ñ—Ç–µ—Ä, –ø–µ—Ä–µ–º—ñ—à–∞–Ω–æ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ –±—É–∫–≤–∏, —Ç–æ–¥—ñ —è–∫ –ø–µ—Ä—à–∞ —Ç–∞ –æ—Å—Ç–∞–Ω–Ω—è –±—É–∫–≤–∏ —Å–ª–æ–≤–∞ –∑–∞–ª–∏—à–∏–ª–∏—Å—è –Ω–∞ —Å–≤–æ—ó—Ö –º—ñ—Å—Ü—è—Ö.";
            showModal("‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ó–∞–≤–¥–∞–Ω–Ω—è 4", body, output);
        }
    </script>

</body>
</html>
